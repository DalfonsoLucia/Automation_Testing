{"ast":null,"code":"import { ArticlePreviewComponent } from \"./article-preview.component\";\nimport { NgClass, NgForOf, NgIf } from \"@angular/common\";\nimport { LoadingState } from \"../../core/models/loading-state.model\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/articles.service\";\nfunction ArticleListComponent_app_article_preview_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-article-preview\", 3);\n  }\n  if (rf & 2) {\n    const article_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"article\", article_r4);\n  }\n}\nfunction ArticleListComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \" Loading articles...\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ArticleListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \" No articles are here... yet.\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    active: a0\n  };\n};\nfunction ArticleListComponent_nav_3_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ArticleListComponent_nav_3_li_2_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const pageNumber_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.setPageTo(pageNumber_r6));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const pageNumber_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, pageNumber_r6 === ctx_r5.currentPage));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", pageNumber_r6, \" \");\n  }\n}\nfunction ArticleListComponent_nav_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"nav\")(1, \"ul\", 5);\n    i0.ɵɵtemplate(2, ArticleListComponent_nav_3_li_2_Template, 3, 4, \"li\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.totalPages);\n  }\n}\nexport class ArticleListComponent {\n  constructor(articlesService) {\n    this.articlesService = articlesService;\n    this.results = [];\n    this.currentPage = 1;\n    this.totalPages = [];\n    this.loading = LoadingState.NOT_LOADED;\n    this.LoadingState = LoadingState;\n    this.destroy$ = new Subject();\n  }\n  set config(config) {\n    if (config) {\n      this.query = config;\n      this.currentPage = 1;\n      this.runQuery();\n    }\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  setPageTo(pageNumber) {\n    this.currentPage = pageNumber;\n    this.runQuery();\n  }\n  runQuery() {\n    this.loading = LoadingState.LOADING;\n    this.results = [];\n    // Create limit and offset filter (if necessary)\n    if (this.limit) {\n      this.query.filters.limit = this.limit;\n      this.query.filters.offset = this.limit * (this.currentPage - 1);\n    }\n    this.articlesService.query(this.query).pipe(takeUntil(this.destroy$)).subscribe(data => {\n      this.loading = LoadingState.LOADED;\n      this.results = data.articles;\n      // Used from http://www.jstips.co/en/create-range-0...n-easily-using-one-line/\n      this.totalPages = Array.from(new Array(Math.ceil(data.articlesCount / this.limit)), (val, index) => index + 1);\n    });\n  }\n  static #_ = this.ɵfac = function ArticleListComponent_Factory(t) {\n    return new (t || ArticleListComponent)(i0.ɵɵdirectiveInject(i1.ArticlesService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArticleListComponent,\n    selectors: [[\"app-article-list\"]],\n    inputs: {\n      limit: \"limit\",\n      config: \"config\"\n    },\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    decls: 4,\n    vars: 4,\n    consts: [[3, \"article\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"article-preview\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"article\"], [1, \"article-preview\"], [1, \"pagination\"], [\"class\", \"page-item\", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"page-item\", 3, \"ngClass\"], [1, \"page-link\", 3, \"click\"]],\n    template: function ArticleListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ArticleListComponent_app_article_preview_0_Template, 1, 1, \"app-article-preview\", 0);\n        i0.ɵɵtemplate(1, ArticleListComponent_div_1_Template, 2, 0, \"div\", 1);\n        i0.ɵɵtemplate(2, ArticleListComponent_div_2_Template, 2, 0, \"div\", 1);\n        i0.ɵɵtemplate(3, ArticleListComponent_nav_3_Template, 3, 1, \"nav\", 2);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngForOf\", ctx.results);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading === ctx.LoadingState.LOADING);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading === ctx.LoadingState.LOADED && !ctx.results.length);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading === ctx.LoadingState.LOADED && ctx.totalPages.length > 1);\n      }\n    },\n    dependencies: [ArticlePreviewComponent, NgForOf, NgClass, NgIf],\n    styles: [\".page-link[_ngcontent-%COMP%] {\\r\\n  cursor: pointer;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL2FydGljbGUtaGVscGVycy9hcnRpY2xlLWxpc3QuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQWU7QUFDakIiLCJzb3VyY2VzQ29udGVudCI6WyIucGFnZS1saW5rIHtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["ArticlePreviewComponent","NgClass","NgForOf","NgIf","LoadingState","Subject","takeUntil","i0","ArticleListComponent","constructor","articlesService","NOT_LOADED","config","query","currentPage","runQuery","ngOnDestroy","destroy$","next","complete","setPageTo","pageNumber","loading","LOADING","results","limit","filters","offset","pipe","subscribe","data","LOADED","articles","totalPages","Array","from","Math","ceil","articlesCount","val","index","selectors","inputs","standalone","features","decls","vars","consts","template","styles"],"sourceRoot":"","sources":["C:\\Progetti\\Test\\angular-realworld-example-app-docker\\src\\app\\shared\\article-helpers\\article-list.component.ts","C:\\Progetti\\Test\\angular-realworld-example-app-docker\\src\\app\\shared\\article-helpers\\article-list.component.html"],"sourcesContent":["import { Component, Input, OnDestroy } from \"@angular/core\";\r\nimport { ArticlesService } from \"../../core/services/articles.service\";\r\nimport { ArticleListConfig } from \"../../core/models/article-list-config.model\";\r\nimport { Article } from \"../../core/models/article.model\";\r\nimport { ArticlePreviewComponent } from \"./article-preview.component\";\r\nimport { NgClass, NgForOf, NgIf } from \"@angular/common\";\r\nimport { LoadingState } from \"../../core/models/loading-state.model\";\r\nimport { Subject } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\n\r\n@Component({\r\n  selector: \"app-article-list\",\r\n  styleUrls: [\"article-list.component.css\"],\r\n  templateUrl: \"./article-list.component.html\",\r\n  imports: [ArticlePreviewComponent, NgForOf, NgClass, NgIf],\r\n  standalone: true,\r\n})\r\nexport class ArticleListComponent implements OnDestroy {\r\n  query!: ArticleListConfig;\r\n  results: Article[] = [];\r\n  currentPage = 1;\r\n  totalPages: Array<number> = [];\r\n  loading = LoadingState.NOT_LOADED;\r\n  LoadingState = LoadingState;\r\n  destroy$ = new Subject<void>();\r\n\r\n  @Input() limit!: number;\r\n  @Input()\r\n  set config(config: ArticleListConfig) {\r\n    if (config) {\r\n      this.query = config;\r\n      this.currentPage = 1;\r\n      this.runQuery();\r\n    }\r\n  }\r\n\r\n  constructor(private articlesService: ArticlesService) {}\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  setPageTo(pageNumber: number) {\r\n    this.currentPage = pageNumber;\r\n    this.runQuery();\r\n  }\r\n\r\n  runQuery() {\r\n    this.loading = LoadingState.LOADING;\r\n    this.results = [];\r\n\r\n    // Create limit and offset filter (if necessary)\r\n    if (this.limit) {\r\n      this.query.filters.limit = this.limit;\r\n      this.query.filters.offset = this.limit * (this.currentPage - 1);\r\n    }\r\n\r\n    this.articlesService\r\n      .query(this.query)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe((data) => {\r\n        this.loading = LoadingState.LOADED;\r\n        this.results = data.articles;\r\n\r\n        // Used from http://www.jstips.co/en/create-range-0...n-easily-using-one-line/\r\n        this.totalPages = Array.from(\r\n          new Array(Math.ceil(data.articlesCount / this.limit)),\r\n          (val, index) => index + 1\r\n        );\r\n      });\r\n  }\r\n}\r\n","<app-article-preview *ngFor=\"let article of results\" [article]=\"article\">\r\n</app-article-preview>\r\n\r\n<div class=\"article-preview\" *ngIf=\"loading === LoadingState.LOADING\">\r\n  Loading articles...\r\n</div>\r\n\r\n<div\r\n  class=\"article-preview\"\r\n  *ngIf=\"loading === LoadingState.LOADED && !results.length\"\r\n>\r\n  No articles are here... yet.\r\n</div>\r\n\r\n<nav *ngIf=\"loading === LoadingState.LOADED && totalPages.length > 1\">\r\n  <ul class=\"pagination\">\r\n    <li\r\n      class=\"page-item\"\r\n      [ngClass]=\"{ active: pageNumber === currentPage }\"\r\n      *ngFor=\"let pageNumber of totalPages\"\r\n    >\r\n      <button class=\"page-link\" (click)=\"setPageTo(pageNumber)\">\r\n        {{ pageNumber }}\r\n      </button>\r\n    </li>\r\n  </ul>\r\n</nav>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}