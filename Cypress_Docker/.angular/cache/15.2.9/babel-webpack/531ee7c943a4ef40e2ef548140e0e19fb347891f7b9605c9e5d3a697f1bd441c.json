{"ast":null,"code":"import { EventEmitter } from \"@angular/core\";\nimport { EMPTY, Subject, switchMap } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { NgClass } from \"@angular/common\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/articles.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../core/services/user.service\";\nconst _c0 = function (a0, a1, a2) {\n  return {\n    disabled: a0,\n    \"btn-outline-primary\": a1,\n    \"btn-primary\": a2\n  };\n};\nconst _c1 = [\"*\"];\nexport class FavoriteButtonComponent {\n  constructor(articleService, router, userService) {\n    this.articleService = articleService;\n    this.router = router;\n    this.userService = userService;\n    this.destroy$ = new Subject();\n    this.isSubmitting = false;\n    this.toggle = new EventEmitter();\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  toggleFavorite() {\n    this.isSubmitting = true;\n    this.userService.isAuthenticated.pipe(switchMap(authenticated => {\n      if (!authenticated) {\n        void this.router.navigate([\"/login\"]);\n        return EMPTY;\n      }\n      if (!this.article.favorited) {\n        return this.articleService.favorite(this.article.slug);\n      } else {\n        return this.articleService.unfavorite(this.article.slug);\n      }\n    }), takeUntil(this.destroy$)).subscribe({\n      next: () => {\n        this.isSubmitting = false;\n        this.toggle.emit(!this.article.favorited);\n      },\n      error: () => this.isSubmitting = false\n    });\n  }\n  static #_ = this.ɵfac = function FavoriteButtonComponent_Factory(t) {\n    return new (t || FavoriteButtonComponent)(i0.ɵɵdirectiveInject(i1.ArticlesService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UserService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FavoriteButtonComponent,\n    selectors: [[\"app-favorite-button\"]],\n    inputs: {\n      article: \"article\"\n    },\n    outputs: {\n      toggle: \"toggle\"\n    },\n    standalone: true,\n    features: [i0.ɵɵStandaloneFeature],\n    ngContentSelectors: _c1,\n    decls: 3,\n    vars: 5,\n    consts: [[1, \"btn\", \"btn-sm\", 3, \"ngClass\", \"click\"], [1, \"ion-heart\"]],\n    template: function FavoriteButtonComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function FavoriteButtonComponent_Template_button_click_0_listener() {\n          return ctx.toggleFavorite();\n        });\n        i0.ɵɵelement(1, \"i\", 1);\n        i0.ɵɵprojection(2);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(1, _c0, ctx.isSubmitting, !ctx.article.favorited, ctx.article.favorited));\n      }\n    },\n    dependencies: [NgClass],\n    encapsulation: 2\n  });\n}","map":{"version":3,"mappings":"AAAA,SAEEA,YAAY,QAIP,eAAe;AAEtB,SAASC,KAAK,EAAEC,OAAO,EAAEC,SAAS,QAAQ,MAAM;AAChD,SAASC,SAAS,QAAQ,gBAAgB;AAC1C,SAASC,OAAO,QAAQ,iBAAiB;;;;;;;;;;;;;AAWzC,OAAM,MAAOC,uBAAuB;EAOlCC,YACmBC,cAA+B,EAC/BC,MAAc,EACdC,WAAwB;IAFxB,mBAAc,GAAdF,cAAc;IACd,WAAM,GAANC,MAAM;IACN,gBAAW,GAAXC,WAAW;IAT9B,aAAQ,GAAG,IAAIR,OAAO,EAAQ;IAC9B,iBAAY,GAAG,KAAK;IAGV,WAAM,GAAG,IAAIF,YAAY,EAAW;EAM3C;EAEHW,WAAW;IACT,IAAI,CAACC,QAAQ,CAACC,IAAI,EAAE;IACpB,IAAI,CAACD,QAAQ,CAACE,QAAQ,EAAE;EAC1B;EAEAC,cAAc;IACZ,IAAI,CAACC,YAAY,GAAG,IAAI;IAExB,IAAI,CAACN,WAAW,CAACO,eAAe,CAC7BC,IAAI,CACHf,SAAS,CAAEgB,aAAa,IAAI;MAC1B,IAAI,CAACA,aAAa,EAAE;QAClB,KAAK,IAAI,CAACV,MAAM,CAACW,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;QACrC,OAAOnB,KAAK;;MAGd,IAAI,CAAC,IAAI,CAACoB,OAAO,CAACC,SAAS,EAAE;QAC3B,OAAO,IAAI,CAACd,cAAc,CAACe,QAAQ,CAAC,IAAI,CAACF,OAAO,CAACG,IAAI,CAAC;OACvD,MAAM;QACL,OAAO,IAAI,CAAChB,cAAc,CAACiB,UAAU,CAAC,IAAI,CAACJ,OAAO,CAACG,IAAI,CAAC;;IAE5D,CAAC,CAAC,EACFpB,SAAS,CAAC,IAAI,CAACQ,QAAQ,CAAC,CACzB,CACAc,SAAS,CAAC;MACTb,IAAI,EAAE,MAAK;QACT,IAAI,CAACG,YAAY,GAAG,KAAK;QACzB,IAAI,CAACW,MAAM,CAACC,IAAI,CAAC,CAAC,IAAI,CAACP,OAAO,CAACC,SAAS,CAAC;MAC3C,CAAC;MACDO,KAAK,EAAE,MAAO,IAAI,CAACb,YAAY,GAAG;KACnC,CAAC;EACN;EAAC;qBA5CUV,uBAAuB;EAAA;EAAA;UAAvBA,uBAAuB;IAAAwB;IAAAC;MAAAV;IAAA;IAAAW;MAAAL;IAAA;IAAAM;IAAAC;IAAAC;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;;QCrBpCC,iCAQC;QADCA;UAAA,OAASC,oBAAgB;QAAA,EAAC;QAE1BD,uBAAyB;QAACA,kBAAyB;QACrDA,iBAAS;;;QARPA,qHAIE;;;mBDYQnC,OAAO;IAAAqC;EAAA","names":["EventEmitter","EMPTY","Subject","switchMap","takeUntil","NgClass","FavoriteButtonComponent","constructor","articleService","router","userService","ngOnDestroy","destroy$","next","complete","toggleFavorite","isSubmitting","isAuthenticated","pipe","authenticated","navigate","article","favorited","favorite","slug","unfavorite","subscribe","toggle","emit","error","selectors","inputs","outputs","standalone","features","ngContentSelectors","decls","vars","consts","template","i0","ctx","encapsulation"],"sourceRoot":"","sources":["C:\\Users\\LuciaD'Alfonso\\Desktop\\Cypress\\angular-realworld-example-app-docker\\src\\app\\shared\\buttons\\favorite-button.component.ts","C:\\Users\\LuciaD'Alfonso\\Desktop\\Cypress\\angular-realworld-example-app-docker\\src\\app\\shared\\buttons\\favorite-button.component.html"],"sourcesContent":["import {\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnDestroy,\r\n  Output,\r\n} from \"@angular/core\";\r\nimport { Router } from \"@angular/router\";\r\nimport { EMPTY, Subject, switchMap } from \"rxjs\";\r\nimport { takeUntil } from \"rxjs/operators\";\r\nimport { NgClass } from \"@angular/common\";\r\nimport { ArticlesService } from \"../../core/services/articles.service\";\r\nimport { UserService } from \"../../core/services/user.service\";\r\nimport { Article } from \"../../core/models/article.model\";\r\n\r\n@Component({\r\n  selector: \"app-favorite-button\",\r\n  templateUrl: \"./favorite-button.component.html\",\r\n  imports: [NgClass],\r\n  standalone: true,\r\n})\r\nexport class FavoriteButtonComponent implements OnDestroy {\r\n  destroy$ = new Subject<void>();\r\n  isSubmitting = false;\r\n\r\n  @Input() article!: Article;\r\n  @Output() toggle = new EventEmitter<boolean>();\r\n\r\n  constructor(\r\n    private readonly articleService: ArticlesService,\r\n    private readonly router: Router,\r\n    private readonly userService: UserService\r\n  ) {}\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  toggleFavorite(): void {\r\n    this.isSubmitting = true;\r\n\r\n    this.userService.isAuthenticated\r\n      .pipe(\r\n        switchMap((authenticated) => {\r\n          if (!authenticated) {\r\n            void this.router.navigate([\"/login\"]);\r\n            return EMPTY;\r\n          }\r\n\r\n          if (!this.article.favorited) {\r\n            return this.articleService.favorite(this.article.slug);\r\n          } else {\r\n            return this.articleService.unfavorite(this.article.slug);\r\n          }\r\n        }),\r\n        takeUntil(this.destroy$)\r\n      )\r\n      .subscribe({\r\n        next: () => {\r\n          this.isSubmitting = false;\r\n          this.toggle.emit(!this.article.favorited);\r\n        },\r\n        error: () => (this.isSubmitting = false),\r\n      });\r\n  }\r\n}\r\n","<button\r\n  class=\"btn btn-sm\"\r\n  [ngClass]=\"{\r\n    disabled: isSubmitting,\r\n    'btn-outline-primary': !article.favorited,\r\n    'btn-primary': article.favorited\r\n  }\"\r\n  (click)=\"toggleFavorite()\"\r\n>\r\n  <i class=\"ion-heart\"></i> <ng-content></ng-content>\r\n</button>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}